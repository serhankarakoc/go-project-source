<div class="auth-body">
    <form id="authForm" method="POST" action="/auth/profile/update-info">
        <input type="hidden" name="csrf_token" value="{{ .CsrfToken }}">
        
        <p class="auth-helper-text" style="text-align: center; margin-bottom: 30px;">
            Kullanıcı bilgilerinizi görüntüleyin ve güncelleyin.
        </p>

        <div class="form-group">
            <label class="form-label" for="name">Ad Soyad</label>
            <div class="input-group">
                <div class="input-icon">
                    <i class="fas fa-user"></i>
                </div>
                <input type="text" class="form-control" id="name" name="name" value="{{ .User.Name }}" required>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label" for="email">E-posta</label>
            <div class="input-group">
                <div class="input-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <input type="email" class="form-control" id="email" name="email" value="{{ .User.Email }}" required>
            </div>
        </div>

        <button type="submit" class="btn-auth">
            <i class="fas fa-save me-2"></i>Bilgileri Güncelle
        </button>
        
        <div class="auth-separator">
            <span>veya</span>
        </div>
        
        </form>

    <form id="authForm" method="POST" action="/auth/profile/update-password">
        <input type="hidden" name="csrf_token" value="{{ .CsrfToken }}">
        
        <div class="form-group">
            <label class="form-label" for="current_password">Mevcut Şifre</label>
            <div class="input-group">
                <div class="input-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <input type="password" class="form-control" id="current_password" name="current_password" placeholder="Mevcut şifrenizi girin" required>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label" for="new_password">Yeni Şifre (İsteğe Bağlı)</label>
            <div class="input-group">
                <div class="input-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <input type="password" class="form-control" id="new_password" name="new_password" placeholder="Yeni şifre belirleyin">
            </div>
        </div>

        <div class="form-group">
            <label class="form-label" for="confirm_password">Yeni Şifre (Tekrar)</label>
            <div class="input-group">
                <div class="input-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <input type="password" class="form-control" id="confirm_password" name="confirm_password" placeholder="Yeni şifreyi tekrar yazın">
            </div>
        </div>

        <button type="submit" class="btn-auth" id="update-btn" disabled>
            <i class="fas fa-key me-2"></i>Şifreyi Güncelle
        </button>
        
        </form>

    <div class="auth-footer">
        <div class="footer-links" style="display: flex; justify-content: space-between; width: 100%;">
            {{ if eq .User.UserTypeID 1 }}
                <a href="/dashboard/home" class="link">Geri Dön</a>
            {{ else }}
                <a href="/panel/anasayfa" class="link">Geri Dön</a>
            {{ end }}
            <a href="/auth/logout" class="link">Çıkış Yap</a>
        </div>
        
    </div>
</div>

<script>
// Orijinal script korunmuştur.
  const passwordInput = document.getElementById('new_password');
  const passwordConfirmInput = document.getElementById('confirm_password');
  const updateBtn = document.getElementById('update-btn');
  const feedback = document.getElementById('password-match-feedback');

  function checkPasswords() {
    const pass = passwordInput.value;
    const pass2 = passwordConfirmInput.value;
    if (pass.length === 0 && pass2.length === 0) {
      feedback.classList.add('d-none');
      updateBtn.disabled = true; // Yeni şifre girmeden güncelleme yapmaya izin verme.
      return;
    }
    if (pass === pass2 && pass.length > 0) {
      feedback.classList.add('d-none');
      updateBtn.disabled = false;
    } else {
      feedback.classList.remove('d-none');
      updateBtn.disabled = true;
    }
  }

  passwordInput.addEventListener('input', checkPasswords);
  passwordConfirmInput.addEventListener('input', checkPasswords);
  checkPasswords();
</script>